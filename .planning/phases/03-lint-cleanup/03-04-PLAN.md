---
phase: 03-lint-cleanup
plan: 04
type: execute
wave: 1
depends_on: []
files_modified: []
autonomous: true
requirements: []
gap_closure: true
must_haves:
  truths:
    - "npm run lint проходит без ошибок (0 errors)"
    - "Нет неиспользуемых переменных"
    - "Нет проблем с react-hooks"
  artifacts: []
  key_links: []
---

<objective>
Финальное исправление оставшихся 225 ошибок lint для достижения цели "npm run lint = 0 errors".

Ключевое отличие от 03-03: НЕ использовать eslint-disable, а ИСПРАВЛЯТЬ реально:
- Префикс _ для неиспользуемых параметров
- Удаление неиспользуемых переменных  
- ИСПРАВЛЕНИЕ типов вместо подавления
</objective>

<context>
# Текущее состояние после 03-03
- 225 errors, 137 warnings
- 03-03 использовала eslint-disable - это неправильный подход

# Оставшиеся проблемы
1. ~180 no-unused-vars errors - неиспользуемые параметры и переменные
2. 47 @typescript-eslint/no-explicit-any - типы нужно ИСПРАВИТЬ, не подавлять
3. 28 react-hooks проблем - setState в useEffect

# Важно
- НЕ использовать eslint-disable для any типов
- ИСПОЛЬЗОВАТЬ: unknown, Record<string, unknown>, proper types
- Префикс _ для неиспользуемых параметров: _userId, _error
</context>

<tasks>

<task type="auto">
  <name>Task 1: Исправить неиспользуемые переменные</name>
  <files>[]</files>
  <action>
Запустить `npx eslint --fix` для авто-исправления:
- prefer-const → const
- Неиспользуемые переменные с _ prefix

Для оставшихся:
1. Префикс _ для неиспользуемых параметров: catch(_error)
2. Удалить неиспользуемые const/let
3. Удалить неиспользуемые импорты

Фокус на компонентах: src/app/components/*.tsx
  </action>
  <verify>`npm run lint 2>&1 | grep -c "no-unused-vars"`</verify>
  <done>Минимум unused-vars ошибок</done>
</task>

<task type="auto">
  <name>Task 2: Типизировать any типы правильно</name>
  <files>[]</files>
  <action>
ДЛЯ КАЖДОГО @typescript-eslint/no-explicit-any:
1. Определить контекст использования
2. Использовать правильный тип:
   - unknown для catch blocks
   - Record<string, unknown> для объектов
   - Конкретные типы для API параметров
3. НЕ использовать eslint-disable

Примеры правильной типизации:
- catch(error: unknown) 
- function getData(id: string | number): Promise<unknown>
- const data: Record<string, unknown> = {}
  </action>
  <verify>`npm run lint 2>&1 | grep -c "@typescript-eslint/no-explicit-any"`</verify>
  <done>0 или минимум any ошибок</done>
</task>

<task type="auto">
  <name>Task 3: Исправить react-hooks</name>
  <files>[]</files>
  <action>
Для react-hooks ошибок:
1. set-state-in-effect: убрать setState из useEffect
   - Использовать условный рендеринг
   - Использовать useMemo для вычислений
2. exhaustive-deps: правильные зависимости
3. Файлы: AuthModal, FilmGridWithFilters, AsyncErrorBoundary
  </action>
  <verify>`npm run lint 2>&1 | grep -c "react-hooks"`</verify>
  <done>0 react-hooks ошибок</done>
</task>

<task type="auto">
  <name>Task 4: Финальная проверка</name>
  <files>[]</files>
  <action>
Запустить `npm run lint`:
- Должно быть 0 errors
- Предупреждения допустимы
  </action>
  <verify>`npm run lint`</verify>
  <done>npm run lint = 0 errors</done>
</task>

</tasks>

<verification>
`npm run lint` возвращает 0 errors
</verification>

<success_criteria>
- Достигнута цель: npm run lint = 0 errors
- Типы ИСПРАВЛЕНЫ, не подавлены
</success_criteria>

<output>
After completion, create `.planning/phases/03-lint-cleanup/{phase}-04-SUMMARY.md`
</output>
